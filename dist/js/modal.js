"use strict";

function openModal() {
  previouslyFocusedElement = document.activeElement;
  var overlay = document.querySelector('.overlay');
  var interactiveElements = overlay.querySelectorAll('button, input, textarea');
  overlay.classList.add('show');
  document.body.classList.add('has-open-modal');
  document.addEventListener('keydown', trapTabKey);
  setTimeout(function () {
    interactiveElements[0].focus();
  }, 100);
}

function closeModal() {
  document.querySelector('.overlay').classList.remove('show');
  document.body.classList.remove('has-open-modal');
  document.removeEventListener('keydown', trapTabKey);

  if (previouslyFocusedElement) {
    previouslyFocusedElement.focus();
  }
}

function trapTabKey(event) {
  var overlay = document.querySelector('.overlay');
  var interactiveElements = overlay.querySelectorAll('button, input');
  var TAB = 9;
  var firstElement = interactiveElements[0];
  var lastElement = interactiveElements[interactiveElements.length - 1];

  if (event.keyCode === TAB) {
    if (event.shiftKey && event.target === firstElement) {
      // shift + tab
      event.preventDefault();
      lastElement.focus();
    } else if (!event.shiftKey && event.target === lastElement) {
      // tab
      event.preventDefault();
      firstElement.focus();
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLmpzIl0sIm5hbWVzIjpbIm9wZW5Nb2RhbCIsInByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsIm92ZXJsYXkiLCJxdWVyeVNlbGVjdG9yIiwiaW50ZXJhY3RpdmVFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGFzc0xpc3QiLCJhZGQiLCJib2R5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRyYXBUYWJLZXkiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJjbG9zZU1vZGFsIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiVEFCIiwiZmlyc3RFbGVtZW50IiwibGFzdEVsZW1lbnQiLCJsZW5ndGgiLCJrZXlDb2RlIiwic2hpZnRLZXkiLCJ0YXJnZXQiLCJwcmV2ZW50RGVmYXVsdCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxTQUFTQSxTQUFULEdBQXFCO0FBQ25CQyxFQUFBQSx3QkFBd0IsR0FBR0MsUUFBUSxDQUFDQyxhQUFwQztBQUNBLE1BQU1DLE9BQU8sR0FBR0YsUUFBUSxDQUFDRyxhQUFULENBQXVCLFVBQXZCLENBQWhCO0FBQ0EsTUFBTUMsbUJBQW1CLEdBQUdGLE9BQU8sQ0FBQ0csZ0JBQVIsQ0FBeUIseUJBQXpCLENBQTVCO0FBQ0FILEVBQUFBLE9BQU8sQ0FBQ0ksU0FBUixDQUFrQkMsR0FBbEIsQ0FBc0IsTUFBdEI7QUFDQVAsRUFBQUEsUUFBUSxDQUFDUSxJQUFULENBQWNGLFNBQWQsQ0FBd0JDLEdBQXhCLENBQTRCLGdCQUE1QjtBQUNBUCxFQUFBQSxRQUFRLENBQUNTLGdCQUFULENBQTBCLFNBQTFCLEVBQXFDQyxVQUFyQztBQUNBQyxFQUFBQSxVQUFVLENBQUMsWUFBVTtBQUFFUCxJQUFBQSxtQkFBbUIsQ0FBQyxDQUFELENBQW5CLENBQXVCUSxLQUF2QjtBQUFpQyxHQUE5QyxFQUFnRCxHQUFoRCxDQUFWO0FBQ0Q7O0FBRUQsU0FBU0MsVUFBVCxHQUFzQjtBQUNwQmIsRUFBQUEsUUFBUSxDQUFDRyxhQUFULENBQXVCLFVBQXZCLEVBQW1DRyxTQUFuQyxDQUE2Q1EsTUFBN0MsQ0FBb0QsTUFBcEQ7QUFDQWQsRUFBQUEsUUFBUSxDQUFDUSxJQUFULENBQWNGLFNBQWQsQ0FBd0JRLE1BQXhCLENBQStCLGdCQUEvQjtBQUNBZCxFQUFBQSxRQUFRLENBQUNlLG1CQUFULENBQTZCLFNBQTdCLEVBQXdDTCxVQUF4Qzs7QUFDQSxNQUFJWCx3QkFBSixFQUE4QjtBQUM1QkEsSUFBQUEsd0JBQXdCLENBQUNhLEtBQXpCO0FBQ0Q7QUFDRjs7QUFFRCxTQUFTRixVQUFULENBQW9CTSxLQUFwQixFQUEyQjtBQUN6QixNQUFNZCxPQUFPLEdBQUdGLFFBQVEsQ0FBQ0csYUFBVCxDQUF1QixVQUF2QixDQUFoQjtBQUNBLE1BQU1DLG1CQUFtQixHQUFHRixPQUFPLENBQUNHLGdCQUFSLENBQXlCLGVBQXpCLENBQTVCO0FBQ0EsTUFBTVksR0FBRyxHQUFHLENBQVo7QUFDQSxNQUFNQyxZQUFZLEdBQUdkLG1CQUFtQixDQUFDLENBQUQsQ0FBeEM7QUFDQSxNQUFNZSxXQUFXLEdBQUdmLG1CQUFtQixDQUFDQSxtQkFBbUIsQ0FBQ2dCLE1BQXBCLEdBQTZCLENBQTlCLENBQXZDOztBQUNBLE1BQUlKLEtBQUssQ0FBQ0ssT0FBTixLQUFrQkosR0FBdEIsRUFBMkI7QUFDekIsUUFBSUQsS0FBSyxDQUFDTSxRQUFOLElBQWtCTixLQUFLLENBQUNPLE1BQU4sS0FBaUJMLFlBQXZDLEVBQXFEO0FBQUU7QUFDckRGLE1BQUFBLEtBQUssQ0FBQ1EsY0FBTjtBQUNBTCxNQUFBQSxXQUFXLENBQUNQLEtBQVo7QUFDRCxLQUhELE1BR08sSUFBSSxDQUFDSSxLQUFLLENBQUNNLFFBQVAsSUFBbUJOLEtBQUssQ0FBQ08sTUFBTixLQUFpQkosV0FBeEMsRUFBcUQ7QUFBRTtBQUM1REgsTUFBQUEsS0FBSyxDQUFDUSxjQUFOO0FBQ0FOLE1BQUFBLFlBQVksQ0FBQ04sS0FBYjtBQUNEO0FBQ0Y7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG9wZW5Nb2RhbCgpIHtcbiAgcHJldmlvdXNseUZvY3VzZWRFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG4gIGNvbnN0IGludGVyYWN0aXZlRWxlbWVudHMgPSBvdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbiwgaW5wdXQsIHRleHRhcmVhJyk7XG4gIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hhcy1vcGVuLW1vZGFsJyk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0cmFwVGFiS2V5KTtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpeyBpbnRlcmFjdGl2ZUVsZW1lbnRzWzBdLmZvY3VzKCk7IH0sIDEwMCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5JykuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hhcy1vcGVuLW1vZGFsJyk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0cmFwVGFiS2V5KTtcbiAgaWYgKHByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCkge1xuICAgIHByZXZpb3VzbHlGb2N1c2VkRWxlbWVudC5mb2N1cygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRyYXBUYWJLZXkoZXZlbnQpIHtcbiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XG4gIGNvbnN0IGludGVyYWN0aXZlRWxlbWVudHMgPSBvdmVybGF5LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbiwgaW5wdXQnKTtcbiAgY29uc3QgVEFCID0gOTtcbiAgY29uc3QgZmlyc3RFbGVtZW50ID0gaW50ZXJhY3RpdmVFbGVtZW50c1swXTtcbiAgY29uc3QgbGFzdEVsZW1lbnQgPSBpbnRlcmFjdGl2ZUVsZW1lbnRzW2ludGVyYWN0aXZlRWxlbWVudHMubGVuZ3RoIC0gMV07XG4gIGlmIChldmVudC5rZXlDb2RlID09PSBUQUIpIHtcbiAgICBpZiAoZXZlbnQuc2hpZnRLZXkgJiYgZXZlbnQudGFyZ2V0ID09PSBmaXJzdEVsZW1lbnQpIHsgLy8gc2hpZnQgKyB0YWJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBsYXN0RWxlbWVudC5mb2N1cygpO1xuICAgIH0gZWxzZSBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIGV2ZW50LnRhcmdldCA9PT0gbGFzdEVsZW1lbnQpIHsgLy8gdGFiXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZmlyc3RFbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuICB9XG59XG4iXSwiZmlsZSI6Im1vZGFsLmpzIn0=
