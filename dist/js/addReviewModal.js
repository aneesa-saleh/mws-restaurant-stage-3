"use strict";

/****** modal *******/
function openModal() {
  previouslyFocusedElement = document.activeElement;
  var overlay = document.querySelector('.overlay');
  var interactiveElements = overlay.querySelectorAll('button, input, textarea');
  overlay.classList.add('show');
  document.body.classList.add('has-open-modal');
  document.addEventListener('keydown', trapTabKey);
  setTimeout(function () {
    interactiveElements[0].focus();
  }, 100);
}

function closeModal() {
  document.querySelector('.overlay').classList.remove('show');
  document.body.classList.remove('has-open-modal');
  document.removeEventListener('keydown', trapTabKey);

  if (previouslyFocusedElement) {
    previouslyFocusedElement.focus();
  }
}

function trapTabKey(event) {
  var overlay = document.querySelector('.overlay');
  var interactiveElements = overlay.querySelectorAll('button, input');
  var TAB = 9;
  var firstElement = interactiveElements[0];
  var lastElement = interactiveElements[interactiveElements.length - 1];

  if (event.keyCode === TAB) {
    if (event.shiftKey && event.target === firstElement) {
      // shift + tab
      event.preventDefault();
      lastElement.focus();
    } else if (!event.shiftKey && event.target === lastElement) {
      // tab
      event.preventDefault();
      firstElement.focus();
    }
  }
}
/****** handle errors *******/


function setNameInputError() {
  var nameInput = document.getElementById('name');
  var nameInputError = document.getElementById('name-error');
  nameInput.classList.add('has-error');
  nameInput.setAttribute('aria-invalid', 'true');
  nameInput.setAttribute('aria-describedby', 'name-error');
  nameInputError.classList.add('show');
}

function clearNameInputError() {
  var nameInput = document.getElementById('name');
  var nameInputError = document.getElementById('name-error');
  nameInput.classList.remove('has-error');
  nameInput.removeAttribute('aria-invalid');
  nameInput.removeAttribute('aria-describedby');
  nameInputError.classList.remove('show');
}

function setRatingInputError() {
  var ratingInput = document.getElementById('rating');
  var ratingInputError = document.getElementById('rating-error');
  ratingInput.classList.add('has-error');
  ratingInput.setAttribute('aria-invalid', 'true');
  ratingInput.setAttribute('aria-describedby', 'rating-error');
  ratingInputError.classList.add('show');
}

function clearRatingInputError() {
  var ratingInput = document.getElementById('rating');
  var ratingInputError = document.getElementById('rating-error');
  ratingInput.classList.remove('has-error');
  ratingInput.removeAttribute('aria-invalid');
  ratingInput.removeAttribute('aria-describedby');
  ratingInputError.classList.remove('show');
}

function setCommentInputError() {
  var commentInput = document.getElementById('comment');
  var commentInputError = document.getElementById('comment-error');
  commentInput.classList.add('has-error');
  commentInput.setAttribute('aria-invalid', 'true');
  commentInput.setAttribute('aria-describedby', 'comment-error');
  commentInputError.classList.add('show');
}

function clearCommentInputError() {
  var commentInput = document.getElementById('comment');
  var commentInputError = document.getElementById('comment-error');
  commentInput.classList.remove('has-error');
  commentInput.removeAttribute('aria-invalid');
  commentInput.removeAttribute('aria-describedby');
  commentInputError.classList.remove('show');
}

var errorFunctions = {
  name: {
    setError: setNameInputError,
    clearError: clearNameInputError
  },
  rating: {
    setError: setRatingInputError,
    clearError: clearRatingInputError
  },
  comment: {
    setError: setCommentInputError,
    clearError: clearCommentInputError
  }
};
/****** validation *******/

function validateInput(id) {
  var input = document.getElementById(id).cloneNode();
  var value = id === 'rating' ? Number.parseInt(input.value, 10) : input.value;

  if (value) {
    errorFunctions[id].clearError();
    return true;
  } else {
    errorFunctions[id].setError();
    return false;
  }
}

function validateAllInputs() {
  var allInputsValid = true;
  var inputIds = ['name', 'rating', 'comment'];
  inputIds.forEach(function (id) {
    var inputValid = validateInput(id);
    allInputsValid = allInputsValid && inputValid;
  });
  return allInputsValid;
}
/****** handle events *******/


function handleRangeChange(event) {
  var ratingValue = document.querySelector('.rating-value');
  ratingValue.innerHTML = "".concat(event.target.value, ".0");
}

function handleNameInputBlur() {
  validateInput('name');
}

function handleRatingInputBlur() {
  validateInput('rating');
}

function handleCommentInputBlur() {
  validateInput('comment');
}

function getFormInputValues() {
  var inputIds = ['name', 'rating', 'comment'];
  var values = {};
  inputIds.forEach(function (id) {
    values[id] = document.getElementById(id).value;
  });
  return values;
}

function clearForm() {
  document.getElementById('name').value = '';
  document.getElementById('rating').value = '0';
  document.querySelector('.rating-value').innerHTML = '0.0';
  document.getElementById('comment').value = '';
}

function handleAddReviewSubmit() {
  var allInputsValid = validateAllInputs();

  if (allInputsValid) {
    var _getFormInputValues = getFormInputValues(),
        name = _getFormInputValues.name,
        rating = _getFormInputValues.rating,
        comment = _getFormInputValues.comment;

    if (navigator.serviceWorker) {
      // perform regular fetch and regular updates
      var submitButton = document.getElementById('add-review-submit');
      submitButton.setAttribute('disabled', true);
      submitButton.setAttribute('aria-busy', 'true');
      DBHelper.addReview(self.restaurant.id, name, rating, comment, function (error, newReview) {
        submitButton.removeAttribute('disabled');
        submitButton.setAttribute('aria-busy', 'false');

        if (error) {
          // TODO: toast error
          console.log(error);
        } else {
          // TODO: toast success
          var ul = document.getElementById('reviews-list');
          ul.appendChild(createReviewHTML(newReview));
        }

        closeModal();
        clearForm();
      });
    } else {}
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkZFJldmlld01vZGFsLmpzIl0sIm5hbWVzIjpbIm9wZW5Nb2RhbCIsInByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCIsImRvY3VtZW50IiwiYWN0aXZlRWxlbWVudCIsIm92ZXJsYXkiLCJxdWVyeVNlbGVjdG9yIiwiaW50ZXJhY3RpdmVFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbGFzc0xpc3QiLCJhZGQiLCJib2R5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRyYXBUYWJLZXkiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJjbG9zZU1vZGFsIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiVEFCIiwiZmlyc3RFbGVtZW50IiwibGFzdEVsZW1lbnQiLCJsZW5ndGgiLCJrZXlDb2RlIiwic2hpZnRLZXkiLCJ0YXJnZXQiLCJwcmV2ZW50RGVmYXVsdCIsInNldE5hbWVJbnB1dEVycm9yIiwibmFtZUlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJuYW1lSW5wdXRFcnJvciIsInNldEF0dHJpYnV0ZSIsImNsZWFyTmFtZUlucHV0RXJyb3IiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRSYXRpbmdJbnB1dEVycm9yIiwicmF0aW5nSW5wdXQiLCJyYXRpbmdJbnB1dEVycm9yIiwiY2xlYXJSYXRpbmdJbnB1dEVycm9yIiwic2V0Q29tbWVudElucHV0RXJyb3IiLCJjb21tZW50SW5wdXQiLCJjb21tZW50SW5wdXRFcnJvciIsImNsZWFyQ29tbWVudElucHV0RXJyb3IiLCJlcnJvckZ1bmN0aW9ucyIsIm5hbWUiLCJzZXRFcnJvciIsImNsZWFyRXJyb3IiLCJyYXRpbmciLCJjb21tZW50IiwidmFsaWRhdGVJbnB1dCIsImlkIiwiaW5wdXQiLCJjbG9uZU5vZGUiLCJ2YWx1ZSIsIk51bWJlciIsInBhcnNlSW50IiwidmFsaWRhdGVBbGxJbnB1dHMiLCJhbGxJbnB1dHNWYWxpZCIsImlucHV0SWRzIiwiZm9yRWFjaCIsImlucHV0VmFsaWQiLCJoYW5kbGVSYW5nZUNoYW5nZSIsInJhdGluZ1ZhbHVlIiwiaW5uZXJIVE1MIiwiaGFuZGxlTmFtZUlucHV0Qmx1ciIsImhhbmRsZVJhdGluZ0lucHV0Qmx1ciIsImhhbmRsZUNvbW1lbnRJbnB1dEJsdXIiLCJnZXRGb3JtSW5wdXRWYWx1ZXMiLCJ2YWx1ZXMiLCJjbGVhckZvcm0iLCJoYW5kbGVBZGRSZXZpZXdTdWJtaXQiLCJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwic3VibWl0QnV0dG9uIiwiREJIZWxwZXIiLCJhZGRSZXZpZXciLCJzZWxmIiwicmVzdGF1cmFudCIsImVycm9yIiwibmV3UmV2aWV3IiwiY29uc29sZSIsImxvZyIsInVsIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVSZXZpZXdIVE1MIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBRUEsU0FBU0EsU0FBVCxHQUFxQjtBQUNuQkMsRUFBQUEsd0JBQXdCLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBcEM7QUFDQSxNQUFNQyxPQUFPLEdBQUdGLFFBQVEsQ0FBQ0csYUFBVCxDQUF1QixVQUF2QixDQUFoQjtBQUNBLE1BQU1DLG1CQUFtQixHQUFHRixPQUFPLENBQUNHLGdCQUFSLENBQXlCLHlCQUF6QixDQUE1QjtBQUNBSCxFQUFBQSxPQUFPLENBQUNJLFNBQVIsQ0FBa0JDLEdBQWxCLENBQXNCLE1BQXRCO0FBQ0FQLEVBQUFBLFFBQVEsQ0FBQ1EsSUFBVCxDQUFjRixTQUFkLENBQXdCQyxHQUF4QixDQUE0QixnQkFBNUI7QUFDQVAsRUFBQUEsUUFBUSxDQUFDUyxnQkFBVCxDQUEwQixTQUExQixFQUFxQ0MsVUFBckM7QUFDQUMsRUFBQUEsVUFBVSxDQUFDLFlBQVU7QUFBRVAsSUFBQUEsbUJBQW1CLENBQUMsQ0FBRCxDQUFuQixDQUF1QlEsS0FBdkI7QUFBaUMsR0FBOUMsRUFBZ0QsR0FBaEQsQ0FBVjtBQUNEOztBQUVELFNBQVNDLFVBQVQsR0FBc0I7QUFDcEJiLEVBQUFBLFFBQVEsQ0FBQ0csYUFBVCxDQUF1QixVQUF2QixFQUFtQ0csU0FBbkMs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LEtBQUQsRUFBUUMsU0FBUixFQUFzQjtBQUNsRk4sUUFBQUEsWUFBWSxDQUFDdkMsZUFBYixDQUE2QixVQUE3QjtBQUNBdUMsUUFBQUEsWUFBWSxDQUFDekMsWUFBYixDQUEwQixXQUExQixFQUF1QyxPQUF2Qzs7QUFDQSxZQUFJOEMsS0FBSixFQUFXO0FBQ1Q7QUFDQUUsVUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlILEtBQVo7QUFDRCxTQUhELE1BR087QUFDTDtBQUNBLGNBQU1JLEVBQUUsR0FBRy9FLFFBQVEsQ0FBQzJCLGNBQVQsQ0FBd0IsY0FBeEIsQ0FBWDtBQUNBb0QsVUFBQUEsRUFBRSxDQUFDQyxXQUFILENBQWVDLGdCQUFnQixDQUFDTCxTQUFELENBQS9CO0FBQ0Q7O0FBQ0QvRCxRQUFBQSxVQUFVO0FBQ1ZxRCxRQUFBQSxTQUFTO0FBQ1YsT0FiRDtBQWNELEtBbEJELE1Ba0JPLENBRU47QUFDRjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKiBtb2RhbCAqKioqKioqL1xuXG5mdW5jdGlvbiBvcGVuTW9kYWwoKSB7XG4gIHByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpO1xuICBjb25zdCBpbnRlcmFjdGl2ZUVsZW1lbnRzID0gb3ZlcmxheS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24sIGlucHV0LCB0ZXh0YXJlYScpO1xuICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoYXMtb3Blbi1tb2RhbCcpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdHJhcFRhYktleSk7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgaW50ZXJhY3RpdmVFbGVtZW50c1swXS5mb2N1cygpOyB9LCAxMDApO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtb3Blbi1tb2RhbCcpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdHJhcFRhYktleSk7XG4gIGlmIChwcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQpIHtcbiAgICBwcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQuZm9jdXMoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cmFwVGFiS2V5KGV2ZW50KSB7XG4gIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpO1xuICBjb25zdCBpbnRlcmFjdGl2ZUVsZW1lbnRzID0gb3ZlcmxheS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24sIGlucHV0Jyk7XG4gIGNvbnN0IFRBQiA9IDk7XG4gIGNvbnN0IGZpcnN0RWxlbWVudCA9IGludGVyYWN0aXZlRWxlbWVudHNbMF07XG4gIGNvbnN0IGxhc3RFbGVtZW50ID0gaW50ZXJhY3RpdmVFbGVtZW50c1tpbnRlcmFjdGl2ZUVsZW1lbnRzLmxlbmd0aCAtIDFdO1xuICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gVEFCKSB7XG4gICAgaWYgKGV2ZW50LnNoaWZ0S2V5ICYmIGV2ZW50LnRhcmdldCA9PT0gZmlyc3RFbGVtZW50KSB7IC8vIHNoaWZ0ICsgdGFiXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbGFzdEVsZW1lbnQuZm9jdXMoKTtcbiAgICB9IGVsc2UgaWYgKCFldmVudC5zaGlmdEtleSAmJiBldmVudC50YXJnZXQgPT09IGxhc3RFbGVtZW50KSB7IC8vIHRhYlxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGZpcnN0RWxlbWVudC5mb2N1cygpO1xuICAgIH1cbiAgfVxufVxuXG4vKioqKioqIGhhbmRsZSBlcnJvcnMgKioqKioqKi9cblxuZnVuY3Rpb24gc2V0TmFtZUlucHV0RXJyb3IoKSB7XG4gIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJyk7XG4gIGNvbnN0IG5hbWVJbnB1dEVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUtZXJyb3InKTtcbiAgbmFtZUlucHV0LmNsYXNzTGlzdC5hZGQoJ2hhcy1lcnJvcicpO1xuICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xuICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgJ25hbWUtZXJyb3InKTtcbiAgbmFtZUlucHV0RXJyb3IuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xufVxuXG5mdW5jdGlvbiBjbGVhck5hbWVJbnB1dEVycm9yKCkge1xuICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpO1xuICBjb25zdCBuYW1lSW5wdXRFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lLWVycm9yJyk7XG4gIG5hbWVJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtZXJyb3InKTtcbiAgbmFtZUlucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XG4gIG5hbWVJbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTtcbiAgbmFtZUlucHV0RXJyb3IuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xufVxuXG5mdW5jdGlvbiBzZXRSYXRpbmdJbnB1dEVycm9yKCkge1xuICBjb25zdCByYXRpbmdJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYXRpbmcnKTtcbiAgY29uc3QgcmF0aW5nSW5wdXRFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYXRpbmctZXJyb3InKTtcbiAgcmF0aW5nSW5wdXQuY2xhc3NMaXN0LmFkZCgnaGFzLWVycm9yJyk7XG4gIHJhdGluZ0lucHV0LnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ3RydWUnKTtcbiAgcmF0aW5nSW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgJ3JhdGluZy1lcnJvcicpO1xuICByYXRpbmdJbnB1dEVycm9yLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbn1cblxuZnVuY3Rpb24gY2xlYXJSYXRpbmdJbnB1dEVycm9yKCkge1xuICBjb25zdCByYXRpbmdJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYXRpbmcnKTtcbiAgY29uc3QgcmF0aW5nSW5wdXRFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYXRpbmctZXJyb3InKTtcbiAgcmF0aW5nSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnaGFzLWVycm9yJyk7XG4gIHJhdGluZ0lucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XG4gIHJhdGluZ0lucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScpO1xuICByYXRpbmdJbnB1dEVycm9yLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbn1cblxuZnVuY3Rpb24gc2V0Q29tbWVudElucHV0RXJyb3IoKSB7XG4gIGNvbnN0IGNvbW1lbnRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50Jyk7XG4gIGNvbnN0IGNvbW1lbnRJbnB1dEVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnQtZXJyb3InKTtcbiAgY29tbWVudElucHV0LmNsYXNzTGlzdC5hZGQoJ2hhcy1lcnJvcicpO1xuICBjb21tZW50SW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCAndHJ1ZScpO1xuICBjb21tZW50SW5wdXQuc2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JywgJ2NvbW1lbnQtZXJyb3InKTtcbiAgY29tbWVudElucHV0RXJyb3IuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xufVxuXG5mdW5jdGlvbiBjbGVhckNvbW1lbnRJbnB1dEVycm9yKCkge1xuICBjb25zdCBjb21tZW50SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudCcpO1xuICBjb25zdCBjb21tZW50SW5wdXRFcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50LWVycm9yJyk7XG4gIGNvbW1lbnRJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdoYXMtZXJyb3InKTtcbiAgY29tbWVudElucHV0LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJyk7XG4gIGNvbW1lbnRJbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTtcbiAgY29tbWVudElucHV0RXJyb3IuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xufVxuXG5jb25zdCBlcnJvckZ1bmN0aW9ucyA9IHtcbiAgbmFtZToge1xuICAgIHNldEVycm9yOiBzZXROYW1lSW5wdXRFcnJvcixcbiAgICBjbGVhckVycm9yOiBjbGVhck5hbWVJbnB1dEVycm9yLFxuICB9LFxuICByYXRpbmc6IHtcbiAgICBzZXRFcnJvcjogc2V0UmF0aW5nSW5wdXRFcnJvcixcbiAgICBjbGVhckVycm9yOiBjbGVhclJhdGluZ0lucHV0RXJyb3IsXG4gIH0sXG4gIGNvbW1lbnQ6IHtcbiAgICBzZXRFcnJvcjogc2V0Q29tbWVudElucHV0RXJyb3IsXG4gICAgY2xlYXJFcnJvcjogY2xlYXJDb21tZW50SW5wdXRFcnJvcixcbiAgfVxufTtcblxuLyoqKioqKiB2YWxpZGF0aW9uICoqKioqKiovXG5cbmZ1bmN0aW9uIHZhbGlkYXRlSW5wdXQoaWQpIHtcbiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuY2xvbmVOb2RlKCk7XG4gIGNvbnN0IHZhbHVlID0gaWQgPT09ICdyYXRpbmcnPyBOdW1iZXIucGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSA6IGlucHV0LnZhbHVlO1xuICBpZiAodmFsdWUpIHtcbiAgICBlcnJvckZ1bmN0aW9uc1tpZF0uY2xlYXJFcnJvcigpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIGVycm9yRnVuY3Rpb25zW2lkXS5zZXRFcnJvcigpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUFsbElucHV0cygpIHtcbiAgbGV0IGFsbElucHV0c1ZhbGlkID0gdHJ1ZTtcbiAgY29uc3QgaW5wdXRJZHMgPSBbJ25hbWUnLCAncmF0aW5nJywgJ2NvbW1lbnQnXTtcbiAgaW5wdXRJZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICBjb25zdCBpbnB1dFZhbGlkID0gdmFsaWRhdGVJbnB1dChpZCk7XG4gICAgYWxsSW5wdXRzVmFsaWQgPSBhbGxJbnB1dHNWYWxpZCAmJiBpbnB1dFZhbGlkO1xuICB9KTtcbiAgcmV0dXJuIGFsbElucHV0c1ZhbGlkO1xufVxuXG4vKioqKioqIGhhbmRsZSBldmVudHMgKioqKioqKi9cblxuZnVuY3Rpb24gaGFuZGxlUmFuZ2VDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHJhdGluZ1ZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJhdGluZy12YWx1ZScpO1xuICByYXRpbmdWYWx1ZS5pbm5lckhUTUwgPSBgJHtldmVudC50YXJnZXQudmFsdWV9LjBgO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVOYW1lSW5wdXRCbHVyKCkge1xuICB2YWxpZGF0ZUlucHV0KCduYW1lJyk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVJhdGluZ0lucHV0Qmx1cigpIHtcbiAgdmFsaWRhdGVJbnB1dCgncmF0aW5nJyk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNvbW1lbnRJbnB1dEJsdXIoKSB7XG4gIHZhbGlkYXRlSW5wdXQoJ2NvbW1lbnQnKTtcbn1cblxuZnVuY3Rpb24gZ2V0Rm9ybUlucHV0VmFsdWVzKCkge1xuICBjb25zdCBpbnB1dElkcyA9IFsnbmFtZScsICdyYXRpbmcnLCAnY29tbWVudCddO1xuICBjb25zdCB2YWx1ZXMgPSB7fTtcbiAgaW5wdXRJZHMuZm9yRWFjaCgoaWQpID0+IHtcbiAgICB2YWx1ZXNbaWRdID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIHZhbHVlcztcbn1cblxuZnVuY3Rpb24gY2xlYXJGb3JtKCkge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpLnZhbHVlID0gJyc7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyYXRpbmcnKS52YWx1ZSA9ICcwJztcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJhdGluZy12YWx1ZScpLmlubmVySFRNTCA9ICcwLjAnO1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudCcpLnZhbHVlID0gJyc7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZFJldmlld1N1Ym1pdCgpIHtcbiAgY29uc3QgYWxsSW5wdXRzVmFsaWQgPSB2YWxpZGF0ZUFsbElucHV0cygpO1xuICBpZiAoYWxsSW5wdXRzVmFsaWQpIHtcbiAgICBjb25zdCB7IG5hbWUsIHJhdGluZywgY29tbWVudCB9ID0gZ2V0Rm9ybUlucHV0VmFsdWVzKCk7XG4gICAgaWYgKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSB7IC8vIHBlcmZvcm0gcmVndWxhciBmZXRjaCBhbmQgcmVndWxhciB1cGRhdGVzXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXJldmlldy1zdWJtaXQnKTtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICBzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWJ1c3knLCAndHJ1ZScpO1xuICAgICAgREJIZWxwZXIuYWRkUmV2aWV3KHNlbGYucmVzdGF1cmFudC5pZCwgbmFtZSwgcmF0aW5nLCBjb21tZW50LCAoZXJyb3IsIG5ld1JldmlldykgPT4ge1xuICAgICAgICBzdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICBzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWJ1c3knLCAnZmFsc2UnKTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgLy8gVE9ETzogdG9hc3QgZXJyb3JcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVE9ETzogdG9hc3Qgc3VjY2Vzc1xuICAgICAgICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtbGlzdCcpO1xuICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGNyZWF0ZVJldmlld0hUTUwobmV3UmV2aWV3KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2xvc2VNb2RhbCgpO1xuICAgICAgICBjbGVhckZvcm0oKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG5cbiAgICB9XG4gIH1cbn1cbiJdLCJmaWxlIjoiYWRkUmV2aWV3TW9kYWwuanMifQ==
