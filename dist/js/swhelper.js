"use strict";

var registerServiceWorker = function registerServiceWorker() {
  if (!navigator.serviceWorker) return;
  navigator.serviceWorker.register('/service-worker.js').catch(function (error) {
    return console.log(error);
  });
};

var cleanMapboxTilesCache = function cleanMapboxTilesCache() {
  caches.open('restaurant-reviews-map-tiles').then(function (cache) {
    return cache.keys().then(function (requests) {
      var length = requests.length;
      if (length <= 12) return; // keep only the 12 most recent tiles

      requests.slice(0, length - 12).forEach(function (request) {
        cache.delete(request);
      });
    });
  });
};

var openDatabase = function openDatabase() {
  if (!navigator.serviceWorker) return Promise.resolve();
  return idb.open('restaurant-reviews', 1, function (upgradeDb) {
    var store = upgradeDb.createObjectStore('restaurants', {
      keyPath: 'id'
    });
  });
};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN3aGVscGVyLmpzIl0sIm5hbWVzIjpbInJlZ2lzdGVyU2VydmljZVdvcmtlciIsIm5hdmlnYXRvciIsInNlcnZpY2VXb3JrZXIiLCJyZWdpc3RlciIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiY2xlYW5NYXBib3hUaWxlc0NhY2hlIiwiY2FjaGVzIiwib3BlbiIsInRoZW4iLCJjYWNoZSIsImtleXMiLCJyZXF1ZXN0cyIsImxlbmd0aCIsInNsaWNlIiwiZm9yRWFjaCIsInJlcXVlc3QiLCJkZWxldGUiLCJvcGVuRGF0YWJhc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsImlkYiIsInVwZ3JhZGVEYiIsInN0b3JlIiwiY3JlYXRlT2JqZWN0U3RvcmUiLCJrZXlQYXRoIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLHFCQUFxQixHQUFHLFNBQXhCQSxxQkFBd0IsR0FBTTtBQUNsQyxNQUFJLENBQUNDLFNBQVMsQ0FBQ0MsYUFBZixFQUE4QjtBQUU5QkQsRUFBQUEsU0FBUyxDQUFDQyxhQUFWLENBQXdCQyxRQUF4QixDQUFpQyxvQkFBakMsRUFDR0MsS0FESCxDQUNTLFVBQUFDLEtBQUs7QUFBQSxXQUFJQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUYsS0FBWixDQUFKO0FBQUEsR0FEZDtBQUVELENBTEQ7O0FBT0EsSUFBTUcscUJBQXFCLEdBQUcsU0FBeEJBLHFCQUF3QixHQUFNO0FBQ2xDQyxFQUFBQSxNQUFNLENBQUNDLElBQVAsQ0FBWSw4QkFBWixFQUE0Q0MsSUFBNUMsQ0FDRSxVQUFBQyxLQUFLO0FBQUEsV0FBSUEsS0FBSyxDQUFDQyxJQUFOLEdBQWFGLElBQWIsQ0FBa0IsVUFBQ0csUUFBRCxFQUFjO0FBQUEsVUFDL0JDLE1BRCtCLEdBQ3BCRCxRQURvQixDQUMvQkMsTUFEK0I7QUFFdkMsVUFBSUEsTUFBTSxJQUFJLEVBQWQsRUFBa0IsT0FGcUIsQ0FJdkM7O0FBQ0FELE1BQUFBLFFBQVEsQ0FBQ0UsS0FBVCxDQUFlLENBQWYsRUFBa0JELE1BQU0sR0FBRyxFQUEzQixFQUErQkUsT0FBL0IsQ0FBdUMsVUFBQ0MsT0FBRCxFQUFhO0FBQ2xETixRQUFBQSxLQUFLLENBQUNPLE1BQU4sQ0FBYUQsT0FBYjtBQUNELE9BRkQ7QUFHRCxLQVJRLENBQUo7QUFBQSxHQURQO0FBV0QsQ0FaRDs7QUFjQSxJQUFNRSxZQUFZLEdBQUcsU0FBZkEsWUFBZSxHQUFNO0FBQ3pCLE1BQUksQ0FBQ25CLFNBQVMsQ0FBQ0MsYUFBZixFQUE4QixPQUFPbUIsT0FBTyxDQUFDQyxPQUFSLEVBQVA7QUFFOUIsU0FBT0MsR0FBRyxDQUFDYixJQUFKLENBQVMsb0JBQVQsRUFBK0IsQ0FBL0IsRUFBa0MsVUFBQ2MsU0FBRCxFQUFlO0FBQ3RELFFBQU1DLEtBQUssR0FBR0QsU0FBUyxDQUFDRSxpQkFBVixDQUE0QixhQUE1QixFQUEyQztBQUN2REMsTUFBQUEsT0FBTyxFQUFFO0FBRDhDLEtBQTNDLENBQWQ7QUFHRCxHQUpNLENBQVA7QUFLRCxDQVJEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyID0gKCkgPT4ge1xuICBpZiAoIW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSByZXR1cm47XG5cbiAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy9zZXJ2aWNlLXdvcmtlci5qcycpXG4gICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XG59O1xuXG5jb25zdCBjbGVhbk1hcGJveFRpbGVzQ2FjaGUgPSAoKSA9PiB7XG4gIGNhY2hlcy5vcGVuKCdyZXN0YXVyYW50LXJldmlld3MtbWFwLXRpbGVzJykudGhlbihcbiAgICBjYWNoZSA9PiBjYWNoZS5rZXlzKCkudGhlbigocmVxdWVzdHMpID0+IHtcbiAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSByZXF1ZXN0cztcbiAgICAgIGlmIChsZW5ndGggPD0gMTIpIHJldHVybjtcblxuICAgICAgLy8ga2VlcCBvbmx5IHRoZSAxMiBtb3N0IHJlY2VudCB0aWxlc1xuICAgICAgcmVxdWVzdHMuc2xpY2UoMCwgbGVuZ3RoIC0gMTIpLmZvckVhY2goKHJlcXVlc3QpID0+IHtcbiAgICAgICAgY2FjaGUuZGVsZXRlKHJlcXVlc3QpO1xuICAgICAgfSk7XG4gICAgfSksXG4gICk7XG59O1xuXG5jb25zdCBvcGVuRGF0YWJhc2UgPSAoKSA9PiB7XG4gIGlmICghbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICByZXR1cm4gaWRiLm9wZW4oJ3Jlc3RhdXJhbnQtcmV2aWV3cycsIDEsICh1cGdyYWRlRGIpID0+IHtcbiAgICBjb25zdCBzdG9yZSA9IHVwZ3JhZGVEYi5jcmVhdGVPYmplY3RTdG9yZSgncmVzdGF1cmFudHMnLCB7XG4gICAgICBrZXlQYXRoOiAnaWQnLFxuICAgIH0pO1xuICB9KTtcbn07XG4iXSwiZmlsZSI6InN3aGVscGVyLmpzIn0=
